"0","trans_sentiment <- function(x){"
"0","  tab <- data.frame(x = x, stringsAsFactors = F) %>%"
"0","   mutate(id = 1:n()) %>%"
"0","   unnest_tokens(word, x) "
"0","  bing <- tab %>% "
"0","    inner_join(get_sentiments(""bing"")) %>%"
"0","    mutate(method = ""bing"")"
"0","  "
"0","  nrc <- tab %>% "
"0","    inner_join(get_sentiments(""nrc"")) %>% "
"0","    filter(sentiment %in% c(""positive"", ""negative"")) %>%"
"0","    mutate(method = ""nrc"")"
"0","  "
"0","  afinn <- tab %>% "
"0","    inner_join(get_sentiments(""afinn"")) %>% "
"0","    mutate(sentiment = ifelse(score > 0, ""positive"", ""negative"")) %>%"
"0","    mutate(method = ""afinn"", score = NULL)"
"0","  "
"0","  dat <- rbind(bing, nrc, afinn) %>%"
"0","    #mutate(sent = sentiment) %>%"
"0","    mutate(sent = ifelse(sentiment == ""positive"", 1, -1)) %>%"
"0","    group_by(id, method) %>%"
"0","    summarise(sent = mean(sent)) %>% "
"0","    ungroup() %>%"
"0","    spread(key = ""method"", ""sent"")"
"0","  emotions <- tab %>% "
"0","    inner_join(get_sentiments(""nrc"")) %>%"
"0","    rename(sent = sentiment) %>%"
"0","    group_by(id) %>%"
"0","    count(sent) %>%"
"0","    spread(""sent"", ""n"") %>%"
"0","    right_join(dat, by = ""id"")"
"0","    "
"0","  return(emotions)"
"0","}"
"0","comments_sent <- trans_sentiment(x = comments_smp$message)"
"2","Joining, by = ""word""
"
"2","Joining, by = ""word""
"
"2","Joining, by = ""word""
"
